<div id="main-container">
  <div class="page-content card">
      <form [formGroup]="addAgentLimitsForm" #form="ngForm" (ngSubmit)="addAgentLimit()">
        <div class="form-sec1">

          <div class="form-control-group">
            <label for="agentID">اسم الوكيل</label>
            <div class="input" *ngIf="selectedAgent || fullname">
              {{ fullname }}
              <span (click)="cancelAgentInput($event)">
                <i>
                  <svg style="width: 0.8rem" role="img" aria-hidden="true" focusable="false" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 352 512">
                    <path fill="currentColor" d="M242.72 256l100.07-100.07c12.28-12.28 12.28-32.19 0-44.48l-22.24-22.24c-12.28-12.28-32.19-12.28-44.48 0L176 189.28 75.93 89.21c-12.28-12.28-32.19-12.28-44.48 0L9.21 111.45c-12.28 12.28-12.28 32.19 0 44.48L109.28 256 9.21 356.07c-12.28 12.28-12.28 32.19 0 44.48l22.24 22.24c12.28 12.28 32.2 12.28 44.48 0L176 322.72l100.07 100.07c12.28 12.28 32.2 12.28 44.48 0l22.24-22.24c12.28-12.28 12.28-32.19 0-44.48L242.72 256z"></path>
                  </svg>
                </i>
              </span>
            </div>
            <div class="input-with-spinner">
              <input [ngClass]="{'hide': fullname}" id="agentID" type="text"
                (keyup)="searchAgent($event)" list="agentsList" name="agentID"
                formControlName="agentID" placeholder="قم بالبحث عن الوكيل بادخال اسمه"
                autocomplete="off" required/>
              <span *ngIf="spinnerAgent" class="spinner"></span>
            </div>
            <datalist id="agentsList">
              <option *ngFor="let agent of agents;" [value]="agent.id">
                {{agent.companyName}} || {{agent.username}}
              </option>
            </datalist>

            <div *ngIf="(form.submitted || formCont('agentID')?.touched) &&
            formCont('agentID')?.invalid" class="alert alert-danger">

             <div *ngIf="formCont('agentID').hasError('required')">رقم الوكيل مطلوب تعبئته</div>
           </div>
          </div>

          <div class="form-control-group">
            <label for="debit">المبلغ المالي</label>
            <input id="debit" type="text" name="debit"
            formControlName="debit" (keydown)="acceptNumbers($event)" required/>

            <div *ngIf="(form.submitted || formCont('debit')?.touched) &&
            formCont('debit')?.invalid" class="alert alert-danger">

             <div *ngIf="formCont('debit').hasError('required')">المبلغ المالي مطلوب تعبئته</div>
           </div>
          </div>

        </div>

        <div class="error" *ngIf="errorMsg">{{errorMsg}}</div>
        <div class="success" *ngIf="successMsg">{{successMsg}}</div>

        <div class="btn-container">
          <button type="submit" [disabled]="form.invalid">
            <span>حفظ</span>
          </button>
        </div>
      </form>
  </div>
</div>
